(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,a,t){e.exports=t(23)},,,,,function(e,a,t){},,function(e,a,t){},,function(e,a,t){},,function(e,a,t){},,function(e,a,t){},,function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),o=t(7),r=t.n(o),s=(t(13),t(15),t(17),t(19),t(1)),c=t(2),i=t(4),m=t(3),d=t(5),u=function(e){var a=e.onRouteChange,t=e.isSignedIn,n=e.first_name;return t?l.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark p-0"},l.a.createElement("div",{className:"container"},l.a.createElement("a",{href:"{}",className:"navbar-brand"},"Leave Management System"),l.a.createElement("button",{className:"navbar-toggler","data-toggle":"collapse","data-target":"#navbarNav"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"navbar-items px-2"},l.a.createElement("a",{href:"{}",className:"nav-link active"},"dashboard")),l.a.createElement("li",{className:"navbar-item"})),l.a.createElement("ul",{className:"navbar-nav ml-auto"},l.a.createElement("li",{className:"nav-item dropdown mr-3"},l.a.createElement("a",{href:"{}",className:"nav-link dropdown-toggle","data-toggle":"dropdown"},l.a.createElement("i",{className:"fa fa-user"})," Welcome ",n),l.a.createElement("div",{className:"dropdown-menu"},l.a.createElement("a",{href:"{}",onClick:function(){return a("")},className:"dropdown-item"},l.a.createElement("i",{className:"fa fa-user-circle"})," Profile"),l.a.createElement("a",{href:"{}",onClick:function(){return a("applyForLeave")},className:"dropdown-item","data-toggle":"modal","data-target":"#leaveModal"},l.a.createElement("i",{className:"fa fa-gear"})," Apply for leave"))),l.a.createElement("li",{className:"nav-item"},l.a.createElement("a",{href:"{}",onClick:function(){fetch("http://localhost:3000/api/user/signOut",{method:"Get",headers:{"Content-Type":"application/json",Authorization:window.sessionStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){e.success&&(window.sessionStorage.removeItem("token"),a("SignOut"))})},className:"nav-link"},l.a.createElement("i",{className:"fa fa-user-times"})," Logout")))))):l.a.createElement("div",null,l.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark p-0"},l.a.createElement("div",{className:"container"},l.a.createElement("a",{href:"home",className:"navbar-brand"},"Leave Management System"),l.a.createElement("button",{className:"navbar-toggler","data-toggle":"collapse","data-target":"#navbarHome"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarHome"},l.a.createElement("ul",{className:"navbar-nav ml-auto"},l.a.createElement("li",{className:"nav-item"},l.a.createElement("a",{onClick:function(){return a("signIn")},className:"nav-link"},l.a.createElement("i",{className:"fa fa-user-circle"})," Login")),l.a.createElement("li",{className:"nav-item"},l.a.createElement("a",{onClick:function(){return a("register")},className:"nav-link","data-toggle":"modal","data-target":"#register-modal"},l.a.createElement("i",{className:"fa fa-user-circle"})," Register")))))))},p=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).onEmailChange=function(e){t.setState({signInEmail:e.target.value})},t.onPasswordChange=function(e){t.setState({signInPassword:e.target.value})},t.onSubmitSigIn=function(){fetch("http://localhost:3000/api/signIn",{method:"Post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.state.signInEmail,password:t.state.signInPassword})}).then(function(e){return e.json()}).then(function(e){e.success?(window.sessionStorage.setItem("token",e.token),t.props.loadUser(e.data),t.props.onRouteChange("dashboard")):t.props.onRouteChange("home")})},t.state={signInEmail:"",signInPassword:"",id:0},t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"container mt-5"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6 mx-auto"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header"},l.a.createElement("h5",null,"Login")),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),l.a.createElement("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",onChange:this.onEmailChange}),l.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password",onChange:this.onPasswordChange})),l.a.createElement("button",{className:"btn btn-primary btn-block",onClick:this.onSubmitSigIn},"Login"))))))}}]),a}(l.a.Component),h=function(){return l.a.createElement("footer",{id:"main-footer",className:"bg-dark text-white mt-5 fixed"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("p",{className:"lead text-center"},"Copyright \xa9 2018 Ayabonga Booi")))))},v=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).onFirstNameChange=function(e){t.setState({firstName:e.target.value})},t.onLastNameChange=function(e){t.setState({lastName:e.target.value})},t.onEmailChange=function(e){t.setState({email:e.target.value})},t.onPositionChange=function(e){t.setState({position:e.target.value})},t.onPasswordChange=function(e){t.setState({password:e.target.value})},t.onConfirmPasswordChange=function(e){t.setState({confirm_password:e.target.value})},t.onRegisterSubmit=function(){fetch("http://localhost:3000/api/addUser",{method:"Post",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_name:t.state.firstName,last_name:t.state.lastName,position:t.state.position,email:t.state.email,password:t.state.password,password2:t.state.confirm_password})}).then(function(e){return e.json()}).then(function(e){console.log(e),e.success?(t.props.loadUser(e.data[0]),t.props.onRouteChange("home")):t.props.onRouteChange("register")})},t.state={firstName:"",lastName:"",email:"",position:"",password:"",confirm_password:""},t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"container mt-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6 mx-auto"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header"},l.a.createElement("h5",null,"Register")),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"exampleInputFirst-name1"},"First Name"),l.a.createElement("input",{type:"text",className:"form-control",id:"exampleInputFirst-name1",placeholder:"Enter First Name",onChange:this.onFirstNameChange}))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"exampleInputLast-name1"},"Last Name"),l.a.createElement("input",{type:"text",className:"form-control",id:"exampleInputlast-name1",placeholder:"Enter Last Name",onChange:this.onLastNameChange}))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),l.a.createElement("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",onChange:this.onEmailChange}),l.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else."))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"category"},"Position"),l.a.createElement("select",{className:"form-control",onChange:this.onPositionChange},l.a.createElement("option",{value:"Web Developer"},"Web Developer"),l.a.createElement("option",{value:"Fullstack Developer"},"Fullstack Developer"),l.a.createElement("option",{value:"Tester"},"Tester"),l.a.createElement("option",{value:"Manager"},"Manager")))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password",onChange:this.onPasswordChange}))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"exampleInputPassword2"},"Confirm Password"),l.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword2",placeholder:"Password",onChange:this.onConfirmPasswordChange})))),l.a.createElement("button",{className:"btn btn-success btn-block",onClick:this.onRegisterSubmit},"Register"))))))}}]),a}(l.a.Component),E=function(){return l.a.createElement("header",{id:"main-header",className:"py2 bg-primary text-white"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h1",null,l.a.createElement("i",{className:"fa fa-gear"})," Dashboard")))))},g=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).onAvailableLeaves=function(e){fetch("http://localhost:3000/api/user/total/leaves/".concat(e),{method:"Get",headers:{"Content-Type":"application/json",Authorization:window.sessionStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(a){t.setState({leaveTotal:a.data}),fetch("http://localhost:3000/api/user/total/applied/leaves/".concat(e),{method:"Get",headers:{"Content-Type":"application/json",Authorization:window.sessionStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){t.setState({applied:e.data[0].count})}),fetch("http://localhost:3000/api/user/total/rejected/".concat(e),{method:"Get",headers:{"Content-Type":"application/json",Authorization:window.sessionStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){t.setState({rejected:e.data[0].count})})})},t.state={leaveTotal:0,rejected:0,applied:0},t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){this.onAvailableLeaves(this.props.id),console.log(this.props.id)}},{key:"render",value:function(){var e=this.state,a=e.leaveTotal,t=e.applied,n=e.rejected;return l.a.createElement("div",{className:"container mt-2"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-body"},l.a.createElement("h3",null,"Available Leaves"),l.a.createElement("h5",{className:"display4"},a)))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-body"},l.a.createElement("h3",null,"Applied Leave"),l.a.createElement("h5",{className:"display4"},t)))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-body"},l.a.createElement("h3",null,"Rejected leave"),l.a.createElement("h5",{className:"display4"},n))))))}}]),a}(l.a.Component),f=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).onColorChange=function(e){switch(e){case"Approved":return"text-success";case"Rejected":return"text-danger";case"Pending":return"text-warning";default:return"text-danger"}},t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.onUserLeaves()}},{key:"render",value:function(){var e=this,a=this.props,t=a.appliedLeaves,n=a.onViewChange,o=a.position,r=a.userId;return l.a.createElement("div",null,l.a.createElement(E,null),"Manager"!==o?l.a.createElement(g,{id:r}):l.a.createElement("div",null),l.a.createElement("div",{className:"container mt-4"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header"},l.a.createElement("h4",null,"Lastest Leave Application")),l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",{className:"thead-inverse"},l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"Employee Name"),l.a.createElement("th",null,"Leave Type"),l.a.createElement("th",null,"Posting Date"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null))),l.a.createElement("tbody",null,t.map(function(a,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,t+1),l.a.createElement("td",null,a.first_name," ",a.last_name),l.a.createElement("td",null,a.leave_type),l.a.createElement("td",null,"2018/10/09"),l.a.createElement("td",{className:e.onColorChange(a.leave_status)},a.leave_status),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return n(a)}},l.a.createElement("i",{className:"fa fa-angle-double-right"})," View")))}))))))))}}]),a}(l.a.Component),N=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).onLeaveTypeChange=function(e){t.setState({leaveType:e.target.value})},t.onDescriptionChange=function(e){t.setState({description:e.target.value})},t.onStartDateChange=function(e){t.setState({startDate:e.target.value})},t.onEndDateChange=function(e){t.setState({endDate:e.target.value})},t.onApplyLeaveSubmit=function(){console.log(t.state),console.log(t.props.userId),fetch("http://localhost:3000/api/request/leave",{method:"Post",headers:{"Content-Type":"application/json",Authorization:window.sessionStorage.getItem("token")},body:JSON.stringify({user_id:t.props.userId,leaveType:t.state.leaveType,description:t.state.description,start_date:t.state.startDate,end_date:t.state.endDate})}).then(function(e){return e.json()}).then(function(e){e.success?(t.props.onUserLeaves(),t.props.onRouteChange("dashboard")):t.props.onRouteChange("dashboard")})},t.state={leaveType:"",description:"",startDate:"",endDate:""},t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"container mt-1"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6 mx-auto"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header"},l.a.createElement("h5",null,"Apply for a leave")),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"category"},"Leave Type"),l.a.createElement("select",{className:"form-control",onChange:this.onLeaveTypeChange},l.a.createElement("option",{value:"sick leave"},"Sick Leave"),l.a.createElement("option",{value:"unpaid leave"},"Unpaid Leave"),l.a.createElement("option",{value:"paid leave"},"Paid Leave"),l.a.createElement("option",{value:"family leave"},"Family Leave"))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"body"},"Description"),l.a.createElement("textarea",{name:"editor1",className:"form-control",onChange:this.onDescriptionChange})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"start_date"},"From"),l.a.createElement("input",{type:"date",className:"form-control",onChange:this.onStartDateChange}))),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"end_date"},"To"),l.a.createElement("input",{type:"date",className:"form-control",onChange:this.onEndDateChange}))))),l.a.createElement("button",{className:"btn btn-primary btn-block",onClick:this.onApplyLeaveSubmit},"Apply"),l.a.createElement("button",{className:"btn btn-warning btn-block"},"Cancel")))))}}]),a}(l.a.Component),b=function(e){var a=e.info,t=e.position,n=a.leave_id,o=a.fullname,r=a.status,s=a.comment,c=function(e,a){fetch("http://localhost:3000/api/update/leave/status/".concat(e,"/").concat(a),{method:"Post",headers:{"Content-Type":"application/json",Authorization:window.sessionStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){console.log(e)})};return l.a.createElement("div",{className:"container mt-5"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6 mx-auto"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header"},l.a.createElement("h5",null,"Leave Request")),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"mb-3"},l.a.createElement("h5",{className:"text-center text-primary"},o),l.a.createElement("h5",{className:" text-center "+function(e){switch(e){case"Approved":return"text-success";case"Rejected":return"text-danger";case"Pending":return"text-warning";default:return"text-danger"}}(r)},r),l.a.createElement("h6",{className:"text-center"},"Requested on Friday 18 October 2018")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"start_date"},"Leave request from"),l.a.createElement("h6",{className:"text-center"},"18/09/2018")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"start_date"},"Leave request to"),l.a.createElement("h6",{className:"text-center"},"20/09/2018")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"start_date"},"Employee Comment"),l.a.createElement("p",{className:"mx-5"},s)),"Manager"===t?l.a.createElement("div",{className:"mb-3"},l.a.createElement("button",{className:"btn btn-success btn-inline-block",onClick:function(){return c(n,"Approved")}},"Approve Leave"),l.a.createElement("button",{className:"btn btn-danger btn-inline-block float-right m",onClick:function(){return c(n,"Rejected")}},"Decline Leave")):"Rejected"===r||"Approved"===r||"Canceled"===r?l.a.createElement("div",null):l.a.createElement("button",{className:"btn btn-defualt btn-inline-block float-right",onClick:function(){return c(n,"Canceled")}},"Cancel"))))))},C=function(){return l.a.createElement("div",{className:"container mt-2"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col bg-light m-3 p-2"},l.a.createElement("i",{className:"fa fa-arrow-left"},l.a.createElement("a",{href:"{}"}," Back")))))},w=(t(21),{route:"home",isSignedIn:!1,user:{id:0,first_name:"",last_name:"",position:"",email:""},appliedLeaves:[],info:{leave_id:0,fullname:"",status:"",comment:"",requestdate:"",from:"",to:""}}),y=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).onViewChange=function(e){console.log(e),t.setState({info:{leave_id:e.id,fullname:e.first_name+" "+e.last_name,status:e.leave_status,comment:e.leave_description}}),t.onRouteChange("viewLeave")},t.loadUser=function(e){var a=e;t.setState({user:{id:a.id,first_name:a.first_name,last_name:a.last_name,position:a.position,email:a.email}}),t.onUserLeaves()},t.onRouteChange=function(e){"signOut"===e?t.setState(w):"dashboard"===e&&t.setState({isSignedIn:!0}),t.setState({route:e})},t.onUserLeaves=function(){var e=t.state.user.id;"Manager"!==t.state.user.position?fetch("http://localhost:3000/api/user/applied/leaves/"+e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:window.sessionStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){t.setState({appliedLeaves:e.data})}):fetch("http://localhost:3000/api/users/applied/history",{method:"GET",headers:{"Content-Type":"application/json",Authorization:window.sessionStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){t.setState({appliedLeaves:e.data})})},t.state=w,t}return Object(d.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=window.sessionStorage.getItem("token");a&&fetch("http://localhost:3000/api/signin",{method:"post",headers:{"Content-Type":"application/json",Authorization:a}}).then(function(e){return e.json()}).then(function(t){t&&t.id&&fetch("http://localhost:3000/api/profile/".concat(t.id),{method:"get",headers:{"Content-Type":"application/json",Authorization:a}}).then(function(e){return e.json()}).then(function(a){a&&a.data.id&&(e.loadUser(a.data),e.onRouteChange("dashboard"))})}).catch(console.log)}},{key:"render",value:function(){var e=this.state,a=e.route,t=e.isSignedIn,n=e.user,o=e.appliedLeaves,r=e.info;return console.log(this.state),l.a.createElement("div",null,l.a.createElement(u,{onRouteChange:this.onRouteChange,isSignedIn:t,first_name:n.first_name}),"home"===a?l.a.createElement("div",null,l.a.createElement(p,{loadUser:this.loadUser,onRouteChange:this.onRouteChange})):"register"===a?l.a.createElement("div",null,l.a.createElement(v,{loadUser:this.loadUser,onRouteChange:this.onRouteChange})):"dashboard"===a?l.a.createElement("div",null,l.a.createElement(f,{appliedLeaves:o,onRouteChange:this.onRouteChange,onUserLeaves:this.onUserLeaves,onViewChange:this.onViewChange,position:n.position,userId:n.id})):"applyForLeave"===a?l.a.createElement("div",null,l.a.createElement(C,null),l.a.createElement(N,{onRouteChange:this.onRouteChange,userId:n.id,onUserLeaves:this.onUserLeaves})):"viewLeave"===a?l.a.createElement("div",null,l.a.createElement(C,null),l.a.createElement(b,{info:r,position:n.position})):l.a.createElement(p,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}),l.a.createElement(h,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[8,2,1]]]);
//# sourceMappingURL=main.a5663e12.chunk.js.map